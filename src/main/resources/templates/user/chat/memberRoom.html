<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Chat</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/user/global.css}" />
  <link rel="stylesheet" th:href="@{/css/user/chat/room.css}" />
</head>
<body>
<div th:replace="user/fragments/header :: header"></div>

<main>
  <div class="container mt-4" style="max-width:600px">
    <h5 th:text="${user.name} + '님과의 채팅'"></h5>

    <div class="border p-3 mb-3" style="height:400px; overflow-y:auto;">
      <div th:each="msg : ${messages}">

        <!-- 연예인 본인 -->
        <div th:if="${msg.senderType.name() == 'MEMBER'}" class="text-end mb-2">
          <span class="badge bg-primary" th:text="${msg.content}">내 메시지</span>
        </div>

        <!-- 팬 -->
        <div th:if="${msg.senderType.name() == 'USER'}" class="text-start mb-2">
          <span class="badge bg-secondary" th:text="${msg.content}">상대 메시지</span>
        </div>

      </div>
    </div>

    <form method="post" th:action="@{/member/chat/message}">
      <input type="hidden" name="roomId" th:value="${room.id}">
      <div class="input-group">
        <input type="text"
               name="content"
               class="form-control"
               placeholder="메시지를 입력하세요"
               required>
        <button class="btn btn-primary">전송</button>
      </div>
    </form>

  </div>
</main>

</body>
</html>